# まえがき {-}

## このドキュメントは何 {-}

この本は、以前から仕事で欲しいなーと思っていたリレーマトリクス基板を実装するまでをまとめた本です。
GreenPAKをI2C汎用出力（GPO）エキスパンダにして、2ロウ6カラムのリレーマトリクスが載ったラズパイの拡張ボード（HAT）
を設計しました。

# GreenPAKでGPOエクスパンダを設計する話

## 設計概要

GreenPAK SLG46826を用いて、6ビット幅2ポートの汎用出力（GPO）エクスパンダを設計しました。
6ビット幅を選んだのは、GPAKのI2Cスレーブ機能やHATのボードサイズからくる制限もありますが、
ソフト設計が比較的楽だからです。

![](images/ioexpander-12bit.svg){.svg width=150mm}

## ピン割当て一覧
## スレーブアドレス空間
## 各ポートへのアクセス方法
### DFFのクロック生成がめんどい

# 設計したIOエクスパンダを使ってラズパイHATを作る話
## 回路図
## 配置図
## ソフト設計例

# 改造・拡張アイデア（未テスト）

**ここに書かれていることはアイデアのみで、まったく未テストです。作ったボードとの互換性を失うのでｗ**

## 電源レールをポートで分けつつ７ビット幅２ポートに拡張する
### （+）GPI１ポート + GPO１ポートにもできる
### （-）I2Cアドレス空間を失う
### （-）ソフトが更にトリッキーになる
